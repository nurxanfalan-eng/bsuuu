<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSU Chat</title>
    <link rel="stylesheet" href="/css/chat.css">
</head>
<body>
    <div class="chat-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="user-profile">
                    <img id="userAvatar" src="/images/default-avatar.png" alt="Avatar" class="avatar">
                    <div class="user-info">
                        <div id="userName">Loading...</div>
                        <div id="userFaculty" class="user-faculty"></div>
                    </div>
                </div>
                <button id="logoutBtn" class="btn-logout" title="Çıxış">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </button>
            </div>

            <div class="sidebar-nav">
                <button class="nav-btn active" data-view="faculties">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    Fakültələr
                </button>
                <button class="nav-btn" data-view="messages">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    Mesajlar
                </button>
                <button class="nav-btn" data-view="profile">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    Profil
                </button>
                <button class="nav-btn" data-view="rules">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    Qaydalar
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Faculties View -->
            <div class="view-content active" id="facultiesView">
                <div class="content-header">
                    <h2>Fakültələr</h2>
                </div>
                <div class="faculties-grid" id="facultiesList">
                    <!-- Faculties will be loaded here -->
                </div>
            </div>

            <!-- Messages View (Private Conversations) -->
            <div class="view-content" id="messagesView">
                <div class="content-header">
                    <h2>Şəxsi Mesajlar</h2>
                </div>
                <div class="conversations-list" id="conversationsList">
                    <!-- Conversations will be loaded here -->
                </div>
            </div>

            <!-- Profile View -->
            <div class="view-content" id="profileView">
                <div class="content-header">
                    <h2>Profil Parametrləri</h2>
                </div>
                <div class="profile-settings">
                    <div class="profile-picture-section">
                        <img id="profilePicture" src="/images/default-avatar.png" alt="Profile" class="profile-picture">
                        <input type="file" id="profilePictureInput" accept="image/*" style="display: none;">
                        <button id="changeProfilePictureBtn" class="btn btn-primary">Şəkli dəyişdir</button>
                    </div>
                    <div class="profile-info" id="profileInfo">
                        <!-- Profile info will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Rules View -->
            <div class="view-content" id="rulesView">
                <div class="content-header">
                    <h2>Qaydalar</h2>
                </div>
                <div class="rules-content" id="rulesContent">
                    <p>Qaydalar yüklənir...</p>
                </div>
            </div>
        </div>

        <!-- Chat Panel (Opens on right side) -->
        <div class="chat-panel" id="chatPanel">
            <div class="chat-header">
                <button id="closeChatBtn" class="btn-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <div class="chat-title">
                    <h3 id="chatRoomName">Chat</h3>
                    <p id="chatRoomInfo" class="chat-room-info"></p>
                </div>
            </div>

            <!-- Topic of the Day -->
            <div class="topic-of-day" id="topicOfDay" style="display: none;">
                <strong>Günün mövzusu:</strong> <span id="topicText"></span>
            </div>

            <div class="chat-messages" id="chatMessages">
                <!-- Messages will be loaded here -->
            </div>

            <div class="chat-input-container">
                <textarea id="messageInput" placeholder="Mesaj yazın..." rows="1"></textarea>
                <button id="sendMessageBtn" class="btn-send">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Context Menu for Messages -->
    <div class="context-menu" id="contextMenu" style="display: none;">
        <button class="context-menu-item" data-action="private">Şəxsi mesaj</button>
        <button class="context-menu-item" data-action="block">Əngəllə</button>
        <button class="context-menu-item" data-action="report">Şikayət et</button>
    </div>

    <!-- User Modal -->
    <div class="modal" id="userModal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div id="userModalContent">
                <!-- User details will be loaded here -->
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script src="/js/chat.js"></script>
</body>
</html>
